var arr=[

    {
      itemName: "Guptaji Shakahari Bhojnalay",
      itemTag:"North Indian",
      itemRating:"3.5",
      itemPrice:"150",
      itemDiscount:"30",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/jb9iyqwlhuyxyvb6zwnz",
      itemCoupon_code:"USETRY30",
      deliveryTime:"15",
      itemCategory:"none",
      qty:"1",
      
    },
    {
      itemName: "Manohar Dairy and Restaurant",
      itemTag:"Sweets",
      itemRating:"4.3",
      itemPrice:"300",
      itemDiscount:"62",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/v6elbsatlbi93xeq0g3c",
      itemCoupon_code:"USETRY30",
      deliveryTime:"30",
      itemCategory:"none",
      qty:"1",

    },
    {
      itemName: "Anjani Bhojnalay",
      itemTag:"North Indian",
      itemRating:"4.8",
      itemPrice:"200",
      itemDiscount:"20",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/u7hwixd7b4papoe2hwdu",
      itemCoupon_code:"USETRY30",
      deliveryTime:"30",
      itemCategory:"none",
      qty:"1",
    },
    {
      itemName: "Burger King",
      itemTag:"burger",
      itemRating:"5.0",
      itemPrice:"160",
      itemDiscount:"70",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/yzdmieopbbypvdfybrur",
      itemCoupon_code:"USETRY30",
      deliveryTime:"25",
      itemCategory:"BestSeller",
      qty:"1",
    },
    {
      itemName: "Biryani By Kilo",
      itemTag:"biryani",
      itemRating:"3.3",
      itemPrice:"350",
      itemDiscount:"60",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/qjlxj9scdfjn6jlytt1x",
      itemCoupon_code:"USETRY30",
      deliveryTime:"35",
      itemCategory:"BestSeller",
      qty:"1",
    },
    {
      itemName: "Idli & More",
      itemTag:"South Indian",
      itemRating:"3.0",
      itemPrice:"180",
      itemDiscount:"65",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/yti6qdbmzawis39mjfni",
      itemCoupon_code:"USETRY30",
      deliveryTime:"18",
      itemCategory:"BestSeller",
      qty:"1",
    },
    {
      itemName: "Rice Bowl Thai & Chinese",
      itemTag:"chinese",
      itemRating:"2.3",
      itemPrice:"200",
      itemDiscount:"30",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/tcg9zzpjyaopkhmdxgus",
      itemCoupon_code:"USETRY30",
      deliveryTime:"36",
      itemCategory:"none",
      qty:"1",
    },
    {
      itemName: "6 Veg Cheese Pizza",
      itemTag:"pizzas",
      itemRating:"4.9",
      itemPrice:"200",
      itemDiscount:"68",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_1024/wihgxiozd9dqpghhu4ri",
      itemCoupon_code:"USETRY30",
      deliveryTime:"40",
      itemCategory:"BestSeller",
      qty:"1",
    },
    {
      itemName:"Sagar Gaire - Kolar",
      itemTag:"cheese.",
      itemRating:"4.0",
      itemPrice:"200",
      itemDiscount:"30",
      itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/cxgudmo1mrxz7v9jnjz1",
      itemCoupon_code:"USETRY30",
      deliveryTime:"26",
      itemCategory:"noner",
      qty:"1",
    }, 
    {
        itemName: "Sweet Truth - Cake and Desserts",
        itemTag:"bakery",
        itemRating:"4.2",
        itemPrice:"200",
        itemDiscount:"23",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/e32026d7yxvhyu4dqqnj",
        itemCoupon_code:"USETRY30",
        deliveryTime:"30",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Sharma & Vishnu Fast Food",
        itemTag:"chinese",
        itemRating:"4.1",
        itemPrice:"200",
        itemDiscount:"30",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/wsy0um42bk0ndpfjzepg",
        itemCoupon_code:"USETRY30",
        deliveryTime:"30",
        itemCategory:"none",
        qty:"1",
      },
      {
        itemName: "Domino's Pizza",
        itemTag:"pizzas",
        itemRating:"6.0",
        itemPrice:"200",
        itemDiscount:"60",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/hoqp5suuwzqphtb86sgh",
        itemCoupon_code:"USETRY30",
        deliveryTime:"30",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Refresh Eat & Drink",
        itemTag:"pizzas",
        itemRating:"4.6",
        itemPrice:"150",
        itemDiscount:"40",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/lhmjn6rrmfgychgb1l35",
        itemCoupon_code:"USETRY30",
        deliveryTime:"35",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Italian Pizzas",
        itemTag:"pizzas",
        itemRating:"4.6",
        itemPrice:"200",
        itemDiscount:"52",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/caduk6r0df4mt90nvris",
        itemCoupon_code:"USETRY30",
        deliveryTime:"25",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "New Zam Zam Restaurant",
        itemTag:"North Indian",
        itemRating:"2.3",
        itemPrice:"100",
        itemDiscount:"60",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/xhauljfuvpbexalrmxsc",
        itemCoupon_code:"USETRY30",
        deliveryTime:"50",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Ganesham Fast Food - New market",
        itemTag:"chinese",
        itemRating:"4.6",
        itemPrice:"200",
        itemDiscount:"40",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/ybbwkjnc5kdc2kihwsxo",
        itemCoupon_code:"USETRY30",
        deliveryTime:"45",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Giani icecream",
        itemTag:"icecream",
        itemRating:"6.0",
        itemPrice:"300",
        itemDiscount:"70",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/cir4ujntivdnuegzmzey",
        itemCoupon_code:"USETRY30",
        deliveryTime:"25",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Chicken Tikka Biryani",
        itemTag:"biryani",
        itemRating:"5.0",
        itemPrice:"200",
        itemDiscount:"20",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_1024/nfayowa7xyg74ftznar2",
        itemCoupon_code:"USETRY30",
        deliveryTime:"50",
        itemCategory:"none",
        qty:"1",
      },
      {
        itemName: "Choco Lava Cake",
        itemTag:"cake",
        itemRating:"5.2",
        itemPrice:"200",
        itemDiscount:"65",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_1024/cyxbbebmsu5au3lvvefq",
        itemCoupon_code:"USETRY30",
        deliveryTime:"45",
        itemCategory:"BestSeller",
        qty:"1",
      },
      {
        itemName: "Chicken Kolkata Roll",
        itemTag:"sandwiches",
        itemRating:"4.6",
        itemPrice:"200",
        itemDiscount:"40",
        itemImage:"https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_1024/sr0mzw1a7noldelxfjzy",
        itemCoupon_code:"USETRY30",
        deliveryTime:"45",
        itemCategory:"BestSeller",
        qty:"1",
      },

      
  
    ];

    localStorage.setItem("main array",JSON.stringify(arr));
    
    document.getElementById("search").append("  ","Search");
    document.getElementById("navcart").append("  ","Cart");
    var count_add_cart=document.createElement("p");
    count_add_cart.setAttribute("id","count_cart");
    document.getElementById("navcart").append(count_add_cart);

    
    var ans=JSON.parse(localStorage.getItem("city")) || "";
    if(ans.length==0)
    {
      document.getElementById("location").innerText="Maharana Pratap Square Delhi";
    }
    else{
      document.getElementById("location").innerText=ans;
    }
     
  display();

      function display(){
      document.getElementById("itemsdetails").innerText="";

    arr.map(function(ele,index)
    {
      var div=document.createElement("div");

      

      var imgdiv=document.createElement("div");
      var img=document.createElement("img");
      img.setAttribute("src",ele.itemImage);
      img.setAttribute("alt","1");
      
      imgdiv.append(img);

      img.addEventListener("click",function()
      {
        var product=arr[index];
        localStorage.setItem("product_details",JSON.stringify(product));
        location.href='../productdetails/productdetails.html';
      })
      

      var div1=document.createElement("div");
      var name=document.createElement("h4");
      name.setAttribute("id","productname");
      name.innerText=ele.itemName;
  
      var itemtag=document.createElement("p");
      itemtag.setAttribute("id","itemtag");
      itemtag.innerText=ele.itemTag;
  
      div1.append(name,itemtag);
  
      var star=document.createElement("span");
      star.setAttribute("class","fa fa-star checked");
  
      var rating=document.createElement("p");
      
      rating.append(star," ",ele.itemRating);

      
       
      if(ele.itemRating>=4.2)
      {
        rating.setAttribute("id","ratinggreen");
      }
      else if(ele.itemRating>=3)
      {
        rating.setAttribute("id","ratingorange");
      }
      else{
        rating.setAttribute("id","ratingred");
      }
      
      var i=document.createElement("i");
      i.setAttribute("class","fa-solid fa-indian-rupee-sign");
  
      var price=document.createElement("p");
      price.setAttribute("id","price");
      price.append(i," ",ele.itemPrice);
      
      var delivery_time=document.createElement("p");
      delivery_time.innerText=ele.deliveryTime+" MINS ";
      
      var div2=document.createElement("div");
      div2.setAttribute("id","rating_and_price");
      div2.append(rating,".",delivery_time,".",price);
  
      var divv3=document.createElement("div");
      divv3.setAttribute("id","parentdiscount");
      var discount=document.createElement("p");
      discount.setAttribute("id","discount");
      discount.innerText=ele.itemDiscount;
     
      var i1=document.createElement("i");
      i1.setAttribute("class","fa-solid fa-percent")
      
      var temp=document.createElement("p");
      temp.innerText="off | ";

      var coupon=document.createElement("p");
      coupon.innerText=ele.itemCoupon_code;

      divv3.append(discount,i1,temp,coupon);

      var div4=document.createElement("div");
      div4.setAttribute("id","parentofcart");
      var cart=document.createElement("button");
      cart.setAttribute("class","Addtocart");
      
      cart.innerText="Add to Cart";
      cart.addEventListener("click",function()
    {
      cartfun(index);
    });
      div4.append(cart);
  

      div.append(imgdiv,div1,div2,divv3,div4);
      document.querySelector("#itemsdetails").append(div);


  });
}
 var addcart=JSON.parse(localStorage.getItem("cart")) || [];
 if(JSON.parse(localStorage.getItem("cart"))==null)
 {
  count=0;
 }
 else{
 var count= JSON.parse(localStorage.getItem("cart")).length;
 }
 if(count!=0)
 {
 document.getElementById("count_cart").innerText=count;
 document.getElementById("count_cart").setAttribute("class","count");
 }
    function cartfun(ind)
    {
      
     var a=arr.filter(function(ele,index)
     {
         return index===ind;
     });
      
     

    addcart.push(a[0]);
    
    localStorage.setItem("cart",JSON.stringify(addcart));
    count=JSON.parse(localStorage.getItem("cart")).length;
    if(count!==0)
    {
      document.getElementById("count_cart").setAttribute("class","count");
    }
     
    document.getElementById("count_cart").innerText=count;

    }

     

    

    function rating_sort()
    {
      event.preventDefault();
      arr.sort(function(a,b){
        if(a.itemRating>b.itemRating)
        {
          return -1;
        }
        if(a.itemRating<b.itemRating)
        {
          return 1;
        }
        return 0;
      })
      display();
    }
    function low_to_high_sort()
    {
      event.preventDefault();
      arr.sort(function(a,b){
        if(a.itemPrice>b.itemPrice)
        {
          return 1;
        }
        if(a.itemPrice<b.itemPrice)
        {
          return -1;
        }
        return 0;
      })
      display();
    }
    function high_to_low_sort()
    {
      event.preventDefault();
      arr.sort(function(a,b){
        if(a.itemPrice>b.itemPrice)
        {
          return -1;
        }
        if(a.itemPrice<b.itemPrice)
        {
          return 1;
        }
        return 0;
      })
      display();
    }
    function delivery_time_sort()
    {
      event.preventDefault();
      arr.sort(function(a,b){
        if(a.deliveryTime>b.deliveryTime)
        {
          return 1;
        }
        if(a.deliveryTime<b.deliveryTime)
        {
          return -1;
        }
        return 0;
      })
      display();
    }
    function sorting_rel()
    {
      event.preventDefault();
      arr.sort(function(a,b){
        if(a.deliveryTime>b.deliveryTime)
        {
          return 1;
        }
        if(a.deliveryTime<b.deliveryTime)
        {
          return -1;
        }
        return 0;
      })
      display();
    }
     function card1()
     {
      location.href="../cardpage/card1.html";
     }
     function card2()
     {
      location.href="../cardpage/card2.html";
     } 
     function card3()
     {
      location.href="../cardpage/card3.html";
     } 
     function card4()
     {
      location.href="../cardpage/card4.html";
     }

     var a=JSON.parse(localStorage.getItem("user"));
    
    if(a!==null)
    {
     document.querySelector("#user").innerText=a[0].username;
    }
    else{
      document.querySelector("#user").innerText="Sign In";
    }
    function signIn()
    {
      event.preventDefault();
      if(a==null)
      {
        
        location.href="../index.html";
         
      }
    }